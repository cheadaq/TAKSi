// This file is auto-generated by TAKSi v1.3.0, DO NOT EDIT!

package com.mycompany.csvconfig;

import java.util.*;
import java.io.IOException;
import org.apache.commons.csv.*;

// 新手引导配置, 新手任务.xlsx
public class NewbieGuideDefine
{
    public String               Name = "";             // ID
    public String               Type = "";             // 任务类型
    public String               Target = "";           // 目标
    public short[]              Accomplishment = null; // 完成步骤
    public Map<String,Integer>  Goods = new HashMap<>(); // 物品
    public String               Description = "";      // 描述

    private static List<NewbieGuideDefine> data_;
    public static List<NewbieGuideDefine> getData() { return data_; } 

    // parse fields data from record
    public void parseFrom(CSVRecord record)
    {
        if (record.size() < 6) {
            throw new RuntimeException(String.format("NewbieGuideDefine: record length too short %d", record.size()));
        }
        if (!record.get(0).isEmpty()) {
            this.Name = record.get(0).trim();
        }
        if (!record.get(1).isEmpty()) {
            this.Type = record.get(1).trim();
        }
        if (!record.get(2).isEmpty()) {
            this.Target = record.get(2).trim();
        }
        {
            String[] tokens = record.get(3).split(AutogenConfigManager.TAKSI_ARRAY_DELIM);
            short[] list = new short[tokens.length];
            for (int i = 0; i < tokens.length; i++) {
                if (!tokens[i].isEmpty()) {
                    short value = Short.parseShort(tokens[i]);
                    list[i] = value;
                }
            }
            this.Accomplishment = list;
        }
        {
            String[] tokens = record.get(4).split(AutogenConfigManager.TAKSI_MAP_DELIM1);
            for(int i = 0; i < tokens.length; i++) {
                String text = tokens[i];
                if (text.isEmpty()) {
                    continue;
                }
                String[] item = text.split(AutogenConfigManager.TAKSI_MAP_DELIM2);
                String key = item[0].trim();
                int value = Integer.parseInt(item[1]);
                this.Goods.put(key, value);
            }
        }
        if (!record.get(5).isEmpty()) {
            this.Description = record.get(5).trim();
        }
    }


    public static void loadFrom(String content) throws IOException
    {
        List<NewbieGuideDefine> data = new ArrayList<>();
        CSVParser parser = CSVParser.parse(content, CSVFormat.EXCEL);
        for (CSVRecord record : parser)
        {
            if (record.size() == 0)
                continue;
            NewbieGuideDefine item = new NewbieGuideDefine();
            item.parseFrom(record);
            data.add(item);
        }
        data_ = data;
    }

}
